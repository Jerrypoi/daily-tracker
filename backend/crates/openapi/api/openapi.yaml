openapi: 3.0.1
info:
  description: Daily tracker backend API
  title: Daily Tracker Backend API
  version: 1.0.0
servers:
- url: http://localhost:8080/api/v1
tags:
- description: Topic is the category of your daily activities. You can create a topic
    and assign it to a daily track.
  name: Topic
- description: Manage your daily track records. Each record represents a 30-minute
    time period.
  name: DailyTrack
paths:
  /topics:
    get:
      description: Retrieves a list of all topics. Supports optional filtering by
        parent_topic_id.
      operationId: getTopics
      parameters:
      - description: Filter topics by parent topic ID.
        in: query
        name: parent_topic_id
        schema:
          format: int64
          type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Topic"
                type: array
          description: Successful operation
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal server error
      summary: Get all topics
      tags:
      - Topic
    post:
      description: Creates a new topic with the given name and optional parent topic.
      operationId: createTopic
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTopicRequest"
        description: Topic object to be created
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Topic"
          description: Topic created successfully
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Invalid input
        "409":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Topic name already exists
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal server error
      summary: Create a new topic
      tags:
      - Topic
      x-codegen-request-body-name: body
  /topics/{id}:
    get:
      description: Retrieves a single topic by its ID.
      operationId: getTopicById
      parameters:
      - description: ID of the topic to retrieve
        in: path
        name: id
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Topic"
          description: Successful operation
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Topic not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal server error
      summary: Get a topic by ID
      tags:
      - Topic
  /daily-tracks:
    get:
      description: Retrieves a list of daily track records. Supports filtering by
        date range and topic.
      operationId: getDailyTracks
      parameters:
      - description: "Filter records starting from this date (inclusive). Format:\
          \ YYYY-MM-DD"
        in: query
        name: start_date
        schema:
          format: date
          type: string
      - description: "Filter records up to this date (inclusive). Format: YYYY-MM-DD"
        in: query
        name: end_date
        schema:
          format: date
          type: string
      - description: Filter records by topic ID
        in: query
        name: topic_id
        schema:
          format: int64
          type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/DailyTrack"
                type: array
          description: Successful operation
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Invalid date format or parameters
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal server error
      summary: Get daily track records
      tags:
      - DailyTrack
    post:
      description: Creates a new daily track record. The start_time must be at :00
        or :30 minutes of an hour.
      operationId: createDailyTrack
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateDailyTrackRequest"
        description: Daily track record to be created
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DailyTrack"
          description: Daily track record created successfully
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: "Invalid input (e.g., start_time not at :00 or :30)"
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Referenced topic not found
        "409":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: A record already exists for this time period
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal server error
      summary: Create a new daily track record
      tags:
      - DailyTrack
      x-codegen-request-body-name: body
  /daily-tracks/{id}:
    get:
      description: Retrieves a single daily track record by its ID.
      operationId: getDailyTrackById
      parameters:
      - description: ID of the daily track record to retrieve
        in: path
        name: id
        required: true
        schema:
          format: int64
          type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DailyTrack"
          description: Successful operation
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Daily track record not found
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          description: Internal server error
      summary: Get a daily track record by ID
      tags:
      - DailyTrack
components:
  schemas:
    Topic:
      example:
        updated_at: 2000-01-23T04:56:07.000+00:00
        topic_name: working
        created_at: 2000-01-23T04:56:07.000+00:00
        parent_topic_id: 6
        id: 0
      properties:
        id:
          description: Unique identifier for the topic
          format: int64
          type: integer
        topic_name:
          description: "Name of the topic (e.g., 'playing', 'working')"
          example: working
          type: string
        created_at:
          description: Timestamp when the topic was created
          format: date-time
          type: string
        updated_at:
          description: Timestamp when the topic was last updated
          format: date-time
          type: string
        parent_topic_id:
          description: ID of the parent topic (null for root-level topics)
          format: int64
          type: integer
      required:
      - created_at
      - id
      - topic_name
      type: object
    CreateTopicRequest:
      example:
        topic_name: coding
        parent_topic_id: 0
      properties:
        topic_name:
          description: Name of the topic to create
          example: coding
          type: string
        parent_topic_id:
          description: Optional parent topic ID for hierarchical organization
          format: int64
          type: integer
      required:
      - topic_name
      type: object
    DailyTrack:
      example:
        start_time: 2000-01-23T04:56:07.000+00:00
        updated_at: 2000-01-23T04:56:07.000+00:00
        created_at: 2000-01-23T04:56:07.000+00:00
        comment: comment
        id: 0
        topic_id: 6
      properties:
        id:
          description: Unique identifier for the daily track record
          format: int64
          type: integer
        start_time:
          description: Start time of the 30-minute period (must be at :00 or :30)
          format: date-time
          type: string
        created_at:
          description: Timestamp when the record was created
          format: date-time
          type: string
        updated_at:
          description: Timestamp when the record was last updated
          format: date-time
          type: string
        topic_id:
          description: ID of the associated topic
          format: int64
          type: integer
        comment:
          description: Optional notes or comments for this time period
          type: string
      required:
      - created_at
      - id
      - start_time
      type: object
    CreateDailyTrackRequest:
      example:
        start_time: 2026-01-03T10:00:00Z
        comment: Working on API design
        topic_id: 0
      properties:
        start_time:
          description: Start time of the 30-minute period (must be at :00 or :30)
          example: 2026-01-03T10:00:00Z
          format: date-time
          type: string
        topic_id:
          description: ID of the topic for this time period
          format: int64
          type: integer
        comment:
          description: Optional notes or comments
          example: Working on API design
          type: string
      required:
      - start_time
      type: object
    ErrorResponse:
      example:
        error: VALIDATION_ERROR
        message: start_time must be at :00 or :30 minutes
      properties:
        error:
          description: Error code
          example: VALIDATION_ERROR
          type: string
        message:
          description: Human-readable error message
          example: start_time must be at :00 or :30 minutes
          type: string
      required:
      - error
      - message
      type: object
  securitySchemes:
    api_key:
      in: header
      name: api_key
      type: apiKey
x-original-swagger-version: "2.0"

